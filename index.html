<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Money ‚Äì Controle Financeiro</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="lock">
    <div class="lock-card">
      <h1>Money</h1>
      <p>Digite a senha para acessar</p>
      <input id="password" type="password" placeholder="Senha">
      <button id="unlockBtn">Entrar</button>
      <div class="lock-hint">
        <button id="setupBtn">Definir nova senha</button>
        <input id="newPassword" type="password" placeholder="Nova senha" style="display:none">
        <button id="setupConfirmBtn" style="display:none">Salvar senha</button>
      </div>
    </div>
  </div>

  <header class="topbar">
    <h1>Money</h1>
    <div class="top-actions">
      <button id="exportBtn">Exportar</button>
      <button id="exportEncBtn">Exportar Criptografado</button>
      <label class="import-label">
        Importar
        <input id="importInput" type="file" accept="application/json">
      </label>
      <label class="import-label">
        Importar .enc
        <input id="importEncInput" type="file" accept=".enc,text/plain">
      </label>
      <button id="syncSaveBtn" title="Salvar no servidor">Salvar no servidor</button>
      <button id="syncLoadBtn" title="Carregar do servidor">Carregar do servidor</button>
    </div>
  </header>

  <nav class="tabs">
    <button data-tab="dashboard" class="active">Dashboard</button>
    <button data-tab="ledger">Lan√ßamentos</button>
    <button data-tab="card">Cart√£o</button>
    <button data-tab="budget">Or√ßamento</button>
    <button data-tab="investments">Investimentos</button>
    <button id="themeToggle" title="Alternar tema">üåô</button>
  </nav>

  <main>
    <section id="dashboard" class="tab active">
      <div class="cards">
        <div class="card">
          <div class="card-title">Saldo atual</div>
          <div id="currentBalance" class="value"></div>
        </div>
        <div class="card">
          <div class="card-title">Resumo do m√™s</div>
          <div id="monthSummary"></div>
        </div>
      </div>
      <div class="card">
        <div class="card-title">Proje√ß√£o 12 meses</div>
        <canvas id="projChart" height="160"></canvas>
        <div id="projection" style="margin-top:8px"></div>
      </div>
      <div class="card">
        <div class="card-title">Categorias do m√™s (real)</div>
        <canvas id="catChart" height="160"></canvas>
      </div>
    </section>

    <section id="ledger" class="tab">
      <div class="card">
        <div class="form-row">
          <select id="entryType">
            <option value="income">Rendimento</option>
            <option value="expense">Despesa</option>
          </select>
          <input id="entryAmount" type="number" step="0.01" placeholder="Valor">
          <input id="entryMerchant" type="text" placeholder="Favorecido" list="merchantsList">
          <input id="entryCategory" type="text" placeholder="Categoria" list="categoriesList">
          <input id="entryDate" type="date">
          <select id="entryRecurrence">
            <option value="none">Sem recorr√™ncia</option>
            <option value="monthly">Mensal</option>
            <option value="weekly">Semanal</option>
            <option value="yearly">Anual</option>
          </select>
          <label style="display:flex;align-items:center;gap:6px"><input id="entryPaid" type="checkbox"> Pago</label>
          <button id="addEntryBtn">Adicionar</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title">Lan√ßamentos</div>
        <div class="toolbar">
          <input id="filterMonth" type="month">
        </div>
        <table class="grid" id="ledgerGrid">
          <thead>
            <tr>
              <th>Data</th>
              <th>Tipo</th>
              <th>Favorecido</th>
              <th>Categoria</th>
              <th>Valor</th>
              <th>Recorr√™ncia</th>
              <th>Pago</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
          <tfoot>
            <tr>
              <td colspan="3">Fatura do cart√£o</td>
              <td id="invoiceTotal"></td>
              <td colspan="2" style="text-align:right">
                <label style="display:inline-flex;align-items:center;gap:6px"><input id="invoicePaid" type="checkbox"> Fatura paga</label>
              </td>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

    <section id="card" class="tab">
      <div class="card">
        <div class="form-row">
          <input id="cardAmount" type="number" step="0.01" placeholder="Valor">
          <input id="cardMerchant" type="text" placeholder="Favorecido" list="merchantsList">
          <input id="cardCategory" type="text" placeholder="Categoria" list="categoriesList">
          <input id="cardDate" type="date">
          <input id="cardDebitDate" type="date" placeholder="D√©bito na fatura">
          <button id="addCardBtn">Adicionar</button>
        </div>
      </div>
      <div class="card">
        <div class="card-title">Lan√ßamentos de cart√£o</div>
        <div class="toolbar">
          <input id="cardMonth" type="month">
          <input id="closingDay" type="number" min="1" max="28" placeholder="Fechamento">
        </div>
        <table class="grid" id="cardGrid">
          <thead>
            <tr>
              <th>Data</th>
              <th>Favorecido</th>
              <th>Categoria</th>
              <th>Valor</th>
              <th>D√©bito</th>
              <th>Pago</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="totals">
          <div>Total da fatura: <span id="statementTotal"></span></div>
        </div>
      </div>
    </section>

  <section id="budget" class="tab">
      <div class="card">
        <div class="form-row">
          <input id="budgetCategory" type="text" placeholder="Categoria">
          <input id="budgetPlanned" type="number" step="0.01" placeholder="Planejado mensal">
          <button id="addBudgetBtn">Salvar categoria</button>
        </div>
      </div>
      <div class="card">
        <div class="toolbar">
          <input id="budgetMonth" type="month">
        </div>
        <table class="grid" id="budgetGrid">
          <thead>
            <tr>
              <th>Item</th>
              <th>Previs√£o</th>
              <th>Real</th>
              <th>Saldo</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
  </section>

  <section id="investments" class="tab">
    <div class="card">
      <div class="subtabs">
        <button data-subtab="inv-assets" class="active">Ativos</button>
        <button data-subtab="inv-ops">Opera√ß√µes</button>
        <button data-subtab="inv-returns">Rendimentos A√ß√µes</button>
        <button data-subtab="inv-returns-fiis">Rendimentos FIIs</button>
        <button data-subtab="inv-returns-details">Rendimentos Detalhados</button>
        <button data-subtab="inv-stocks">$ A√ß√µes</button>
        <button data-subtab="inv-fiis">$ FIIs</button>
      </div>
    </div>
    <section id="inv-assets" class="subtab active">
      <div class="card">
        <div class="form-row">
          <select id="invAssetType">
            <option value="acao">A√ß√£o</option>
            <option value="fii">FII</option>
            <option value="usd">U$</option>
            <option value="fi">FI</option>
            <option value="fixa">Fixa</option>
          </select>
          <input id="invAssetTicker" type="text" placeholder="Ativo" list="assetsList">
          <button id="invAddAssetBtn">Adicionar ativo</button>
        </div>
      </div>
      <div class="card">
        <table class="grid" id="invAssetsGrid">
          <thead>
            <tr>
              <th>Tipo</th>
              <th>Ativo</th>
              <th>Pre√ßo</th>
              <th>M√©dia</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="inv-ops" class="subtab">
      <div class="card">
        <div class="form-row">
          <select id="invOpType">
            <option value="compra">Compra</option>
            <option value="venda">Venda</option>
            <option value="provento">Provento</option>
          </select>
          <select id="invOpAsset"></select>
          <input id="invOpDate" type="date">
          <input id="invOpQty" type="number" step="1" placeholder="Q">
          <input id="invOpPrice" type="number" step="0.01" placeholder="Valor">
          <button id="invAddOpBtn">Adicionar opera√ß√£o</button>
        </div>
      </div>
      <div class="card">
        <table class="grid" id="invOpsGrid">
          <thead>
            <tr>
              <th>Opera√ß√£o</th>
              <th>Ativo</th>
              <th>Data</th>
              <th>Q</th>
              <th>Valor</th>
              <th>Total</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="inv-returns" class="subtab">
      <div class="card">
        <div class="card-title">Rendimentos em A√ß√µes</div>
        <table class="grid" id="invReturnsGrid">
          <thead>
            <tr>
              <th>Ativo</th>
              <th>Compra (T)</th>
              <th>Venda (T)</th>
              <th>TIR (R$)</th>
              <th>TIR (%)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="card">
        <canvas id="invReturnsChart" height="160"></canvas>
      </div>
    </section>

    <section id="inv-returns-fiis" class="subtab">
      <div class="card">
        <div class="card-title">Rendimentos de FIIs</div>
        <table class="grid" id="invReturnsFiisGrid">
          <thead>
            <tr>
              <th>FII</th>
              <th>Compra (T)</th>
              <th>Venda (T)</th>
              <th>TIR (R$)</th>
              <th>TIR (%)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="card">
        <canvas id="invReturnsFiisChart" height="160"></canvas>
      </div>
    </section>

    <section id="inv-returns-details" class="subtab">
      <div class="card">
        <div class="card-title">Rendimentos Detalhados</div>
        <table class="grid" id="invReturnsDetailsGrid">
          <thead>
            <tr>
              <th>Ativo</th>
              <th>Qtd</th>
              <th>Compra</th>
              <th>Venda</th>
              <th>M√©dia Compra</th>
              <th>M√©dia Venda</th>
              <th>Compra (T)</th>
              <th>Venda (T)</th>
              <th>Val. (R$)</th>
              <th>Val. (%)</th>
              <th>Proventos (R$)</th>
              <th>Proventos (%)</th>
              <th>TIR (R$)</th>
              <th>TIR (%)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="inv-stocks" class="subtab">
      <div class="card">
        <div class="form-row">
          <input id="invStocksBudget" type="number" step="0.01" placeholder="Valor investido em a√ß√µes">
        </div>
      </div>
      <div class="card">
        <table class="grid" id="invStocksPlanGrid">
          <thead>
            <tr>
              <th>A√ß√£o</th>
              <th>Pre√ßo</th>
              <th>Tenho</th>
              <th>%</th>
              <th>Falta</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="card">
        <canvas id="invStocksDonut" height="160"></canvas>
      </div>
    </section>

    <section id="inv-fiis" class="subtab">
      <div class="card">
        <div class="form-row">
          <input id="invFiisBudget" type="number" step="0.01" placeholder="Valor investido em FIIs">
        </div>
      </div>
      <div class="card">
        <table class="grid" id="invFiisPlanGrid">
          <thead>
            <tr>
              <th>FII</th>
              <th>Pre√ßo</th>
              <th>Tenho</th>
              <th>%</th>
              <th>Falta</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="card">
        <canvas id="invFiisDonut" height="160"></canvas>
      </div>
    </section>
  </section>
  </main>

  <script src="app.js"></script>
  <datalist id="categoriesList"></datalist>
  <datalist id="merchantsList"></datalist>
  <datalist id="assetsList"></datalist>
</body>
</html>